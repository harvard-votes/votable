{"ast":null,"code":"import { hasProperty, pushUnique, createTagRepeat } from '../../lib/utils.js';\nimport { dateValue } from '../../lib/date.js';\nimport { parseHTML } from '../../lib/dom.js';\nimport View from './View.js';\n\nfunction computeMonthRange(range, thisYear) {\n  if (!range || !range[0] || !range[1]) {\n    return;\n  }\n\n  const [[startY, startM], [endY, endM]] = range;\n\n  if (startY > thisYear || endY < thisYear) {\n    return;\n  }\n\n  return [startY === thisYear ? startM : -1, endY === thisYear ? endM : 12];\n}\n\nexport default class MonthsView extends View {\n  constructor(picker) {\n    super(picker, {\n      id: 1,\n      name: 'months',\n      cellClass: 'month'\n    });\n  }\n\n  init(options) {\n    let onConstruction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    if (onConstruction) {\n      this.grid = this.element;\n      this.element.classList.add('months', 'datepicker-grid', 'w-64', 'grid', 'grid-cols-4');\n      this.grid.appendChild(parseHTML(createTagRepeat('span', 12, {\n        'data-month': ix => ix\n      })));\n    }\n\n    super.init(options);\n  }\n\n  setOptions(options) {\n    if (options.locale) {\n      this.monthNames = options.locale.monthsShort;\n    }\n\n    if (hasProperty(options, 'minDate')) {\n      if (options.minDate === undefined) {\n        this.minYear = this.minMonth = this.minDate = undefined;\n      } else {\n        const minDateObj = new Date(options.minDate);\n        this.minYear = minDateObj.getFullYear();\n        this.minMonth = minDateObj.getMonth();\n        this.minDate = minDateObj.setDate(1);\n      }\n    }\n\n    if (hasProperty(options, 'maxDate')) {\n      if (options.maxDate === undefined) {\n        this.maxYear = this.maxMonth = this.maxDate = undefined;\n      } else {\n        const maxDateObj = new Date(options.maxDate);\n        this.maxYear = maxDateObj.getFullYear();\n        this.maxMonth = maxDateObj.getMonth();\n        this.maxDate = dateValue(this.maxYear, this.maxMonth + 1, 0);\n      }\n    }\n\n    if (options.beforeShowMonth !== undefined) {\n      this.beforeShow = typeof options.beforeShowMonth === 'function' ? options.beforeShowMonth : undefined;\n    }\n  } // Update view's settings to reflect the viewDate set on the picker\n\n\n  updateFocus() {\n    const viewDate = new Date(this.picker.viewDate);\n    this.year = viewDate.getFullYear();\n    this.focused = viewDate.getMonth();\n  } // Update view's settings to reflect the selected dates\n\n\n  updateSelection() {\n    const {\n      dates,\n      rangepicker\n    } = this.picker.datepicker;\n    this.selected = dates.reduce((selected, timeValue) => {\n      const date = new Date(timeValue);\n      const year = date.getFullYear();\n      const month = date.getMonth();\n\n      if (selected[year] === undefined) {\n        selected[year] = [month];\n      } else {\n        pushUnique(selected[year], month);\n      }\n\n      return selected;\n    }, {});\n\n    if (rangepicker && rangepicker.dates) {\n      this.range = rangepicker.dates.map(timeValue => {\n        const date = new Date(timeValue);\n        return isNaN(date) ? undefined : [date.getFullYear(), date.getMonth()];\n      });\n    }\n  } // Update the entire view UI\n\n\n  render() {\n    // refresh disabled months on every render in order to clear the ones added\n    // by beforeShow hook at previous render\n    this.disabled = [];\n    this.picker.setViewSwitchLabel(this.year);\n    this.picker.setPrevBtnDisabled(this.year <= this.minYear);\n    this.picker.setNextBtnDisabled(this.year >= this.maxYear);\n    const selected = this.selected[this.year] || [];\n    const yrOutOfRange = this.year < this.minYear || this.year > this.maxYear;\n    const isMinYear = this.year === this.minYear;\n    const isMaxYear = this.year === this.maxYear;\n    const range = computeMonthRange(this.range, this.year);\n    Array.from(this.grid.children).forEach((el, index) => {\n      const classList = el.classList;\n      const date = dateValue(this.year, index, 1);\n      el.className = `datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`;\n\n      if (this.isMinView) {\n        el.dataset.date = date;\n      } // reset text on every render to clear the custom content set\n      // by beforeShow hook at previous render\n\n\n      el.textContent = this.monthNames[index];\n\n      if (yrOutOfRange || isMinYear && index < this.minMonth || isMaxYear && index > this.maxMonth) {\n        classList.add('disabled');\n      }\n\n      if (range) {\n        const [rangeStart, rangeEnd] = range;\n\n        if (index > rangeStart && index < rangeEnd) {\n          classList.add('range');\n        }\n\n        if (index === rangeStart) {\n          classList.add('range-start');\n        }\n\n        if (index === rangeEnd) {\n          classList.add('range-end');\n        }\n      }\n\n      if (selected.includes(index)) {\n        classList.add('selected', 'bg-blue-700', 'text-white', 'dark:bg-blue-600', 'dark:text-white');\n        classList.remove('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n      }\n\n      if (index === this.focused) {\n        classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n      }\n\n      if (this.beforeShow) {\n        this.performBeforeHook(el, index, date);\n      }\n    });\n  } // Update the view UI by applying the changes of selected and focused items\n\n\n  refresh() {\n    const selected = this.selected[this.year] || [];\n    const [rangeStart, rangeEnd] = computeMonthRange(this.range, this.year) || [];\n    this.grid.querySelectorAll('.range, .range-start, .range-end, .selected, .focused').forEach(el => {\n      el.classList.remove('range', 'range-start', 'range-end', 'selected', 'bg-blue-700', 'dark:bg-blue-600', 'dark:text-white', 'text-white', 'focused', 'bg-gray-100', 'dark:bg-gray-600');\n      el.classList.add('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n    });\n    Array.from(this.grid.children).forEach((el, index) => {\n      const classList = el.classList;\n\n      if (index > rangeStart && index < rangeEnd) {\n        classList.add('range');\n      }\n\n      if (index === rangeStart) {\n        classList.add('range-start');\n      }\n\n      if (index === rangeEnd) {\n        classList.add('range-end');\n      }\n\n      if (selected.includes(index)) {\n        classList.add('selected', 'bg-blue-700', 'text-white', 'dark:bg-blue-600', 'dark:text-white');\n        classList.remove('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n      }\n\n      if (index === this.focused) {\n        classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n      }\n    });\n  } // Update the view UI by applying the change of focused item\n\n\n  refreshFocus() {\n    this.grid.querySelectorAll('.focused').forEach(el => {\n      el.classList.remove('focused', 'bg-gray-100'), 'dark:bg-gray-600';\n    });\n    this.grid.children[this.focused].classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n  }\n\n}","map":{"version":3,"sources":["/Users/albertqi/Desktop/Directory/CampusContact/client/node_modules/@themesberg/tailwind-datepicker/js/picker/views/MonthsView.js"],"names":["hasProperty","pushUnique","createTagRepeat","dateValue","parseHTML","View","computeMonthRange","range","thisYear","startY","startM","endY","endM","MonthsView","constructor","picker","id","name","cellClass","init","options","onConstruction","grid","element","classList","add","appendChild","ix","setOptions","locale","monthNames","monthsShort","minDate","undefined","minYear","minMonth","minDateObj","Date","getFullYear","getMonth","setDate","maxDate","maxYear","maxMonth","maxDateObj","beforeShowMonth","beforeShow","updateFocus","viewDate","year","focused","updateSelection","dates","rangepicker","datepicker","selected","reduce","timeValue","date","month","map","isNaN","render","disabled","setViewSwitchLabel","setPrevBtnDisabled","setNextBtnDisabled","yrOutOfRange","isMinYear","isMaxYear","Array","from","children","forEach","el","index","className","isMinView","dataset","textContent","rangeStart","rangeEnd","includes","remove","performBeforeHook","refresh","querySelectorAll","refreshFocus"],"mappings":"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","sourcesContent":["import {hasProperty, pushUnique, createTagRepeat} from '../../lib/utils.js';\nimport {dateValue} from '../../lib/date.js';\nimport {parseHTML} from '../../lib/dom.js';\nimport View from './View.js';\n\nfunction computeMonthRange(range, thisYear) {\n  if (!range || !range[0] || !range[1]) {\n    return;\n  }\n\n  const [[startY, startM], [endY, endM]] = range;\n  if (startY > thisYear || endY < thisYear) {\n    return;\n  }\n  return [\n    startY === thisYear ? startM : -1,\n    endY === thisYear ? endM : 12,\n  ];\n}\n\nexport default class MonthsView extends View {\n  constructor(picker) {\n    super(picker, {\n      id: 1,\n      name: 'months',\n      cellClass: 'month',\n    });\n  }\n\n  init(options, onConstruction = true) {\n    if (onConstruction) {\n      this.grid = this.element;\n      this.element.classList.add('months', 'datepicker-grid', 'w-64', 'grid', 'grid-cols-4');\n      this.grid.appendChild(parseHTML(createTagRepeat('span', 12, {'data-month': ix => ix})));\n    }\n    super.init(options);\n  }\n\n  setOptions(options) {\n    if (options.locale) {\n      this.monthNames = options.locale.monthsShort;\n    }\n    if (hasProperty(options, 'minDate')) {\n      if (options.minDate === undefined) {\n        this.minYear = this.minMonth = this.minDate = undefined;\n      } else {\n        const minDateObj = new Date(options.minDate);\n        this.minYear = minDateObj.getFullYear();\n        this.minMonth = minDateObj.getMonth();\n        this.minDate = minDateObj.setDate(1);\n      }\n    }\n    if (hasProperty(options, 'maxDate')) {\n      if (options.maxDate === undefined) {\n        this.maxYear = this.maxMonth = this.maxDate = undefined;\n      } else {\n        const maxDateObj = new Date(options.maxDate);\n        this.maxYear = maxDateObj.getFullYear();\n        this.maxMonth = maxDateObj.getMonth();\n        this.maxDate = dateValue(this.maxYear, this.maxMonth + 1, 0);\n      }\n    }\n    if (options.beforeShowMonth !== undefined) {\n      this.beforeShow = typeof options.beforeShowMonth === 'function'\n        ? options.beforeShowMonth\n        : undefined;\n    }\n  }\n\n  // Update view's settings to reflect the viewDate set on the picker\n  updateFocus() {\n    const viewDate = new Date(this.picker.viewDate);\n    this.year = viewDate.getFullYear();\n    this.focused = viewDate.getMonth();\n  }\n\n  // Update view's settings to reflect the selected dates\n  updateSelection() {\n    const {dates, rangepicker} = this.picker.datepicker;\n    this.selected = dates.reduce((selected, timeValue) => {\n      const date = new Date(timeValue);\n      const year = date.getFullYear();\n      const month = date.getMonth();\n      if (selected[year] === undefined) {\n        selected[year] = [month];\n      } else {\n        pushUnique(selected[year], month);\n      }\n      return selected;\n    }, {});\n    if (rangepicker && rangepicker.dates) {\n      this.range = rangepicker.dates.map(timeValue => {\n        const date = new Date(timeValue);\n        return isNaN(date) ? undefined : [date.getFullYear(), date.getMonth()];\n      });\n    }\n  }\n\n  // Update the entire view UI\n  render() {\n    // refresh disabled months on every render in order to clear the ones added\n    // by beforeShow hook at previous render\n    this.disabled = [];\n\n    this.picker.setViewSwitchLabel(this.year);\n    this.picker.setPrevBtnDisabled(this.year <= this.minYear);\n    this.picker.setNextBtnDisabled(this.year >= this.maxYear);\n\n    const selected = this.selected[this.year] || [];\n    const yrOutOfRange = this.year < this.minYear || this.year > this.maxYear;\n    const isMinYear = this.year === this.minYear;\n    const isMaxYear = this.year === this.maxYear;\n    const range = computeMonthRange(this.range, this.year);\n\n    Array.from(this.grid.children).forEach((el, index) => {\n      const classList = el.classList;\n      const date = dateValue(this.year, index, 1);\n\n      el.className = `datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`;\n      if (this.isMinView) {\n        el.dataset.date = date;\n      }\n      // reset text on every render to clear the custom content set\n      // by beforeShow hook at previous render\n      el.textContent = this.monthNames[index];\n\n      if (\n        yrOutOfRange\n        || isMinYear && index < this.minMonth\n        || isMaxYear && index > this.maxMonth\n      ) {\n        classList.add('disabled');\n      }\n      if (range) {\n        const [rangeStart, rangeEnd] = range;\n        if (index > rangeStart && index < rangeEnd) {\n          classList.add('range');\n        }\n        if (index === rangeStart) {\n          classList.add('range-start');\n        }\n        if (index === rangeEnd) {\n          classList.add('range-end');\n        }\n      }\n      if (selected.includes(index)) {\n        classList.add('selected', 'bg-blue-700', 'text-white', 'dark:bg-blue-600', 'dark:text-white');\n        classList.remove('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n      }\n      if (index === this.focused) {\n        classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n      }\n\n      if (this.beforeShow) {\n        this.performBeforeHook(el, index, date);\n      }\n    });\n  }\n\n  // Update the view UI by applying the changes of selected and focused items\n  refresh() {\n    const selected = this.selected[this.year] || [];\n    const [rangeStart, rangeEnd] = computeMonthRange(this.range, this.year) || [];\n    this.grid\n      .querySelectorAll('.range, .range-start, .range-end, .selected, .focused')\n      .forEach((el) => {\n        el.classList.remove('range', 'range-start', 'range-end', 'selected', 'bg-blue-700', 'dark:bg-blue-600', 'dark:text-white', 'text-white', 'focused', 'bg-gray-100', 'dark:bg-gray-600');\n        el.classList.add('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n      });\n    Array.from(this.grid.children).forEach((el, index) => {\n      const classList = el.classList;\n      if (index > rangeStart && index < rangeEnd) {\n        classList.add('range');\n      }\n      if (index === rangeStart) {\n        classList.add('range-start');\n      }\n      if (index === rangeEnd) {\n        classList.add('range-end');\n      }\n      if (selected.includes(index)) {\n        classList.add('selected', 'bg-blue-700', 'text-white', 'dark:bg-blue-600', 'dark:text-white');\n        classList.remove('text-gray-900', 'hover:bg-gray-100', 'dark:text-white', 'dark:hover:bg-gray-600');\n      }\n      if (index === this.focused) {\n        classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n      }\n    });\n  }\n\n  // Update the view UI by applying the change of focused item\n  refreshFocus() {\n    this.grid.querySelectorAll('.focused').forEach((el) => {\n      el.classList.remove('focused', 'bg-gray-100'), 'dark:bg-gray-600';\n    });\n    this.grid.children[this.focused].classList.add('focused', 'bg-gray-100', 'dark:bg-gray-600');\n  }\n}"]},"metadata":{},"sourceType":"module"}