{"ast":null,"code":"import _toConsumableArray from\"/Users/albertqi/Desktop/Directory/CampusContact/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/albertqi/Desktop/Directory/CampusContact/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/albertqi/Desktop/Directory/CampusContact/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/albertqi/Desktop/Directory/CampusContact/client/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import'./Script.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Script(){var navigate=useNavigate();var initialScript=useLocation().state;var _useState=useState(initialScript),_useState2=_slicedToArray(_useState,2),script=_useState2[0],setScript=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),contacts=_useState4[0],setContacts=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),contactIndex=_useState6[0],setContactIndex=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),replacedBody=_useState8[0],setReplacedBody=_useState8[1];var contactFieldNames=[\"First Name\",\"Last Name\",\"House/Yard\",\"Suite\",\"Class Year\",\"Home City\",\"Home State\",\"Contact Status\",\"PTV Status\",\"Registration Status\",\"Stage of Voting Process\"];// Update contacts state on input change\nvar inputChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _e$target,name,value,contactsCopy;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_e$target=e.target,name=_e$target.name,value=_e$target.value;contactsCopy=_toConsumableArray(contacts);contactsCopy[contactIndex][name]=value;_context.next=5;return setContacts(contactsCopy);case 5:submit();case 6:case\"end\":return _context.stop();}}},_callee);}));return function inputChange(_x){return _ref.apply(this,arguments);};}();// Update contact\nvar submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:8000/edit-contact/\".concat(contacts[contactIndex].id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(contacts[contactIndex])});case 3:response=_context2.sent;_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function submit(){return _ref2.apply(this,arguments);};}();// Get all contacts\nvar getContacts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,jsonData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"http://localhost:8000/contacts\");case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:jsonData=_context3.sent;setContacts(jsonData);_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0.message);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function getContacts(){return _ref3.apply(this,arguments);};}();// Update script body\nvar updateBody=function updateBody(){var updatedBody=script.body;if(contacts[contactIndex]==null)return;var _contacts$contactInde=contacts[contactIndex],first_name=_contacts$contactInde.first_name,last_name=_contacts$contactInde.last_name,house=_contacts$contactInde.house,suite=_contacts$contactInde.suite,class_year=_contacts$contactInde.class_year,city=_contacts$contactInde.city,state=_contacts$contactInde.state,contact_status=_contacts$contactInde.contact_status,ptv_status=_contacts$contactInde.ptv_status,registration_status=_contacts$contactInde.registration_status,stage_of_voting_process=_contacts$contactInde.stage_of_voting_process;var arr=[first_name,last_name,house,suite,class_year,city,state,contact_status,ptv_status,registration_status,stage_of_voting_process];var fieldValues=[\"{first_name}\",\"{last_name}\",\"{house}\",\"{suite}\",\"{class_year}\",\"{city}\",\"{state}\",\"{contact_status}\",\"{ptv_status}\",\"{registration_status}\",\"{stage_of_voting_process}\"];for(var i=0;i<fieldValues.length;i++){updatedBody=updatedBody.replaceAll(fieldValues[i],arr[i]);}setReplacedBody(updatedBody);};// Get information regarding current contact\nvar getContactInfo=function getContactInfo(){if(contacts[contactIndex]==null)return[];var _contacts$contactInde2=contacts[contactIndex],first_name=_contacts$contactInde2.first_name,last_name=_contacts$contactInde2.last_name,house=_contacts$contactInde2.house,suite=_contacts$contactInde2.suite,class_year=_contacts$contactInde2.class_year,city=_contacts$contactInde2.city,state=_contacts$contactInde2.state,contact_status=_contacts$contactInde2.contact_status,ptv_status=_contacts$contactInde2.ptv_status,registration_status=_contacts$contactInde2.registration_status,stage_of_voting_process=_contacts$contactInde2.stage_of_voting_process;var arr=[first_name,last_name,house,suite,class_year,city,state,contact_status,ptv_status,registration_status,stage_of_voting_process];return arr;};// Previous contact\nvar prev=function prev(){if(contactIndex-1<0)return;setContactIndex(contactIndex-1);};// Next contact\nvar next=function next(){if(contactIndex+1>=contacts.length)return;setContactIndex(contactIndex+1);};useEffect(function(){getContacts();},[]);useEffect(function(){updateBody();},[contactIndex]);useEffect(function(){updateBody();},[contacts]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 mr-6 w-full bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"p\",{className:\"script text-lg\",children:replacedBody})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 w-fit whitespace-nowrap bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\",children:contactFieldNames.map(function(field,index){return/*#__PURE__*/_jsxs(\"p\",{children:[field,\": \",getContactInfo()[index]]},field);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 my-6 w-full bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contactStatus\",className:\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\",children:\"Contact Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"contact_status\",id:\"contactStatus\",onChange:inputChange,value:contacts[contactIndex]==null?\"\":contacts[contactIndex].contact_status,className:\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Contacted\"}),/*#__PURE__*/_jsx(\"option\",{children:\"No Response\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Not Contacted\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ptvStatus\",className:\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\",children:\"PTV Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"ptv_status\",id:\"ptvStatus\",onChange:inputChange,value:contacts[contactIndex]==null?\"\":contacts[contactIndex].ptv_status,className:\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Full PTV Completed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Short PTV Completed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Not Completed\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registrationStatus\",className:\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\",children:\"Registration Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"registration_status\",id:\"registrationStatus\",onChange:inputChange,value:contacts[contactIndex]==null?\"\":contacts[contactIndex].registration_status,className:\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Registered\"}),/*#__PURE__*/_jsx(\"option\",{children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Not Registered\"})]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stageOfVotingProcess\",className:\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\",children:\"Stage of Voting Process\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"stage_of_voting_process\",id:\"stageOfVotingProcess\",onChange:inputChange,value:contacts[contactIndex]==null?\"\":contacts[contactIndex].stage_of_voting_process,className:\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Voted In Person\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Submitted Absentee Ballot\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Plan To Vote In Person\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Requested Absentee Ballot\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Unknown\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex mb-6 items-center\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:prev,className:\"relative left-0 text-blue-700 inline-flex items-center hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm pl-1.5 pr-3.5 py-2.5 text-center dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-600 dark:focus:ring-blue-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Previous\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"w-48 absolute left-64 right-0 mx-auto text-center\",children:[contactIndex+1,\" of \",contacts.length]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:next,className:\"absolute right-6 text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm pl-4 pr-2.5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\",children:[\"Next\",/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})]})]})]});}export default Script;","map":{"version":3,"sources":["/Users/albertqi/Desktop/Directory/CampusContact/client/src/pages/Script.js"],"names":["useEffect","useState","useNavigate","useLocation","Script","navigate","initialScript","state","script","setScript","contacts","setContacts","contactIndex","setContactIndex","replacedBody","setReplacedBody","contactFieldNames","inputChange","e","target","name","value","contactsCopy","submit","fetch","id","method","headers","body","JSON","stringify","response","console","error","message","getContacts","json","jsonData","updateBody","updatedBody","first_name","last_name","house","suite","class_year","city","contact_status","ptv_status","registration_status","stage_of_voting_process","arr","fieldValues","i","length","replaceAll","getContactInfo","prev","next","map","field","index"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport './Script.css';\n\nfunction Script() {\n    const navigate = useNavigate();\n    const initialScript = useLocation().state;\n\n    const [script, setScript] = useState(initialScript);\n    const [contacts, setContacts] = useState([]);\n    const [contactIndex, setContactIndex] = useState(0);\n    const [replacedBody, setReplacedBody] = useState(\"\");\n\n    const contactFieldNames = [\"First Name\", \"Last Name\", \"House/Yard\", \"Suite\", \"Class Year\",\n        \"Home City\", \"Home State\", \"Contact Status\", \"PTV Status\", \"Registration Status\", \"Stage of Voting Process\"];\n\n    // Update contacts state on input change\n    const inputChange = async (e) => {\n        const { name, value } = e.target;\n        let contactsCopy = [...contacts];\n        contactsCopy[contactIndex][name] = value;\n        await setContacts(contactsCopy);\n        submit();\n    };\n\n    // Update contact\n    const submit = async () => {\n        try {\n            const response = await fetch(\n                `http://localhost:8000/edit-contact/${contacts[contactIndex].id}`,\n                {\n                    method: \"PUT\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify(contacts[contactIndex])\n                }\n            );\n        } catch (error) {\n            console.error(error.message);\n        }\n    };\n\n    // Get all contacts\n    const getContacts = async () => {\n        try {\n            const response = await fetch(\"http://localhost:8000/contacts\");\n            const jsonData = await response.json();\n\n            setContacts(jsonData);\n        } catch (err) {\n            console.error(err.message);\n        }\n    };\n\n    // Update script body\n    const updateBody = () => {\n        var updatedBody = script.body;\n        if (contacts[contactIndex] == null) return;\n        const { first_name, last_name, house, suite, class_year, city, state,\n            contact_status, ptv_status, registration_status, stage_of_voting_process } =\n            contacts[contactIndex];\n        const arr = [first_name, last_name, house, suite, class_year, city, state,\n            contact_status, ptv_status, registration_status, stage_of_voting_process];\n        const fieldValues = [\"{first_name}\", \"{last_name}\", \"{house}\", \"{suite}\", \"{class_year}\",\n            \"{city}\", \"{state}\", \"{contact_status}\", \"{ptv_status}\", \"{registration_status}\", \"{stage_of_voting_process}\"];\n        for (let i = 0; i < fieldValues.length; i++) {\n            updatedBody = updatedBody.replaceAll(fieldValues[i], arr[i]);\n        }\n        setReplacedBody(updatedBody);\n    };\n\n    // Get information regarding current contact\n    const getContactInfo = () => {\n        if (contacts[contactIndex] == null) return [];\n        const { first_name, last_name, house, suite, class_year, city, state,\n            contact_status, ptv_status, registration_status, stage_of_voting_process } =\n            contacts[contactIndex];\n        const arr = [first_name, last_name, house, suite, class_year, city, state,\n            contact_status, ptv_status, registration_status, stage_of_voting_process];\n        return arr;\n    }\n\n    // Previous contact\n    const prev = () => {\n        if (contactIndex - 1 < 0) return;\n        setContactIndex(contactIndex - 1);\n    }\n\n    // Next contact\n    const next = () => {\n        if (contactIndex + 1 >= contacts.length) return;\n        setContactIndex(contactIndex + 1);\n    };\n\n    useEffect(() => {\n        getContacts();\n    }, []);\n\n    useEffect(() => {\n        updateBody();\n    }, [contactIndex]);\n\n    useEffect(() => {\n        updateBody();\n    }, [contacts]);\n\n    return (\n        <div className=\"p-6\">\n            <div className=\"inline-flex w-full\">\n                <div className=\"p-6 mr-6 w-full bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\">\n                    <p className=\"script text-lg\">{replacedBody}</p>\n                </div>\n                <div className=\"p-6 w-fit whitespace-nowrap bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\">\n                    {contactFieldNames.map((field, index) => (\n                        <p key={field}>{field}: {getContactInfo()[index]}</p>\n                    ))}\n                </div>\n            </div>\n            <div className=\"p-6 my-6 w-full bg-white rounded-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700\">\n                <label htmlFor=\"contactStatus\" className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\">Contact Status</label>\n                <select name=\"contact_status\" id=\"contactStatus\" onChange={inputChange} value={contacts[contactIndex] == null ? \"\" : contacts[contactIndex].contact_status} className=\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\">\n                    <option>Contacted</option>\n                    <option>No Response</option>\n                    <option>Not Contacted</option>\n                </select>\n                <label htmlFor=\"ptvStatus\" className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\">PTV Status</label>\n                <select name=\"ptv_status\" id=\"ptvStatus\" onChange={inputChange} value={contacts[contactIndex] == null ? \"\" : contacts[contactIndex].ptv_status} className=\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\">\n                    <option>Full PTV Completed</option>\n                    <option>Short PTV Completed</option>\n                    <option>Not Completed</option>\n                </select>\n                <label htmlFor=\"registrationStatus\" className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\">Registration Status</label>\n                <select name=\"registration_status\" id=\"registrationStatus\" onChange={inputChange} value={contacts[contactIndex] == null ? \"\" : contacts[contactIndex].registration_status} className=\"mb-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\">\n                    <option>Registered</option>\n                    <option>In Progress</option>\n                    <option>Not Registered</option>\n                </select>\n                <label htmlFor=\"stageOfVotingProcess\" className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-400\">Stage of Voting Process</label>\n                <select name=\"stage_of_voting_process\" id=\"stageOfVotingProcess\" onChange={inputChange} value={contacts[contactIndex] == null ? \"\" : contacts[contactIndex].stage_of_voting_process} className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\">\n                    <option>Voted In Person</option>\n                    <option>Submitted Absentee Ballot</option>\n                    <option>Plan To Vote In Person</option>\n                    <option>Requested Absentee Ballot</option>\n                    <option>Unknown</option>\n                </select>\n            </div>\n\n            <div className=\"inline-flex mb-6 items-center\">\n                <button type=\"button\" onClick={prev} className=\"relative left-0 text-blue-700 inline-flex items-center hover:text-white border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm pl-1.5 pr-3.5 py-2.5 text-center dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-600 dark:focus:ring-blue-800\">\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>Previous\n                </button>\n                <p className=\"w-48 absolute left-64 right-0 mx-auto text-center\">{contactIndex + 1} of {contacts.length}</p>\n                <button type=\"button\" onClick={next} className=\"absolute right-6 text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm pl-4 pr-2.5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\">Next\n                    <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default Script;\n"]},"metadata":{},"sourceType":"module"}